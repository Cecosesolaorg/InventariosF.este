<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cecosesola | Inventario | Feria del Este</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; 
            color: #c9d1d9; 
            overflow-x: hidden;
        }
        
        .hidden {
            display: none !important;
        }

        .gradient-text {
            background-image: linear-gradient(90deg, #58a6ff 0%, #bc8cff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* --- Estilos Login --- */
        #login-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(13, 17, 23, 0.98);
            backdrop-filter: blur(12px);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }

        .login-card {
            background: linear-gradient(145deg, #161b22, #0d1117);
            border: 1px solid #30363d;
            box-shadow: 0 0 50px rgba(88, 166, 255, 0.15);
            padding: 2rem;
            border-radius: 1.5rem;
            width: 95%;
            max-width: 450px;
            text-align: center;
        }

        /* Buscador de nombres */
        .select-container {
            position: relative;
            margin: 1.5rem 0;
            text-align: left;
        }

        .input-field {
            background-color: #0d1117;
            border: 1px solid #30363d;
            color: white;
            padding: 0.85rem 1rem;
            padding-right: 2.5rem; /* Espacio para el bot贸n X */
            border-radius: 0.75rem;
            width: 100%;
            outline: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .input-field:focus {
            border-color: #58a6ff;
            box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.2);
        }

        #clear-input-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #8b949e;
            cursor: pointer;
            padding: 5px;
            transition: color 0.2s;
        }

        #clear-input-btn:hover {
            color: #f85149;
        }

        #name-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 0.75rem;
            max-height: 250px;
            overflow-y: auto;
            z-index: 1100;
            margin-top: 5px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        .name-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #21262d;
            font-size: 0.85rem;
            color: #8b949e;
            transition: background 0.2s;
        }

        .name-item:hover {
            background-color: #1f242c;
            color: #58a6ff;
        }

        .btn-primary {
            background: linear-gradient(90deg, #238636, #2ea043);
            color: white;
            font-weight: bold;
            padding: 0.85rem 2rem;
            border-radius: 0.75rem;
            width: 100%;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 160, 67, 0.4);
        }

        /* Custom Scrollbar */
        #name-list::-webkit-scrollbar { width: 6px; }
        #name-list::-webkit-scrollbar-track { background: #0d1117; }
        #name-list::-webkit-scrollbar-thumb { background: #30363d; border-radius: 10px; }

        /* --- Estilos Mapa y Nodos --- */
        .aisle-node {
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(188, 140, 255, 0.1);
            border: 1px solid #30363d;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            height: 120px;
            width: 100%;
            position: relative;
            overflow: hidden;
            background-color: #0d1117;
            border-radius: 0.75rem;
        }

        .aisle-node:hover {
            transform: scale(1.03);
            border-color: transparent;
            background-color: #161b22;
        }
        
        .aisle-node > div {
            position: relative;
            z-index: 12;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        @keyframes rotate-border {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes neon-glow {
            0% { box-shadow: 0 0 5px #58a6ff, 0 0 10px #58a6ff, 0 0 20px #bc8cff; opacity: 0.9; }
            100% { box-shadow: 0 0 10px #bc8cff, 0 0 20px #bc8cff, 0 0 40px #58a6ff; opacity: 1; }
        }

        .aisle-node::before {
            content: '';
            position: absolute;
            width: 200%; height: 200%;
            top: -50%; left: -50%;
            background: conic-gradient(from 0deg at 50% 50%, #FF00D4 0%, #00CCFF 25%, #FF00D4 50%, #00CCFF 75%, #FF00D4 100%);
            animation: rotate-border 4s linear infinite;
            z-index: 11;
        }

        .aisle-node::after {
            content: '';
            position: absolute;
            top: 3px; left: 3px; right: 3px; bottom: 3px;
            background-color: #0d1117;
            border-radius: 0.75rem;
            z-index: 11;
        }

        .aisle-node:hover { animation: neon-glow 1.5s ease-in-out infinite alternate; }

        #central-node { background-color: #161b22; height: 150px; animation: neon-glow 2s ease-in-out infinite alternate; }
        #central-node::after { background-color: #161b22; }

        .map-container {
            position: relative;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 20px;
            padding: 3rem 1rem;
        }

        .svg-connections {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        
        .flow-line {
            stroke: rgba(88, 166, 255, 0.4);
            stroke-width: 2;
            fill: none;
        }

        @media (max-width: 768px) {
            .map-container { grid-template-columns: 1fr 1fr; gap: 15px; }
            #central-node-container { grid-column: 1 / 3; }
            .aisle-node { height: 90px; }
        }

    </style>
</head>
<body class="min-h-screen p-4 md:p-8">

    <!-- LOGIN SCREEN -->
    <div id="login-screen">
        <div class="login-card">
            <h2 class="text-3xl font-bold text-white mb-2">Compa帽eros</h2>
            <p class="text-gray-400 text-sm mb-4">Seleccione su nombre o escriba uno nuevo para ingresar</p>
            
            <form onsubmit="handleLogin(event)">
                <div class="select-container">
                    <input type="text" id="search-input" class="input-field" placeholder="Buscar o escribir nombre..." autocomplete="off">
                    
                    <!-- Bot贸n X para limpiar input -->
                    <div id="clear-input-btn" class="hidden" onclick="clearLoginInput()" title="Borrar texto">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                        </svg>
                    </div>

                    <div id="name-list" class="hidden">
                        <!-- Nombres inyectados por JS -->
                    </div>
                </div>
                <button type="submit" class="btn-primary">
                    INGRESAR AL MAPA
                </button>
            </form>
        </div>
    </div>

    <!-- Encabezado Fijo -->
    <header class="text-center mb-10">
        <!-- Contenedor del Mensaje de Bienvenida -->
        <div id="welcome-message" class="hidden text-xs md:text-sm text-indigo-400 font-bold mb-1 tracking-[0.2em] uppercase bg-indigo-900/20 py-1 px-4 inline-block rounded-full border border-indigo-500/30">
            <!-- Se llena con JS: Nombre + Bot贸n de salir -->
        </div>

        <h1 class="text-4xl md:text-6xl font-black tracking-tighter mt-4">
            <span class="gradient-text">Cecosesola</span>
        </h1>
        <p class="text-lg text-gray-500 font-medium">FERIA DEL ESTE | INVENTARIO</p>
    </header>

    <main id="app-container" class="max-w-7xl mx-auto">
        <section id="map-view" class="map-container">
            <svg id="connection-lines" class="svg-connections" viewBox="0 0 1000 1000" preserveAspectRatio="none"></svg>

            <div id="central-node-container" class="col-span-4 flex justify-center mb-8">
                <div id="central-node" class="aisle-node rounded-xl cursor-default w-full max-w-xl">
                    <div>
                        <h3 class="font-bold text-white text-xl md:text-3xl tracking-widest">MAPA DE INVENTARIO</h3>
                    </div>
                </div>
            </div>

            <!-- Contenedores de pasillos (JS los llena) -->
            <div id="aisle-1-container"></div> <div id="aisle-2-container"></div>
            <div id="aisle-3-container"></div> <div id="aisle-4-container"></div>
            <div id="aisle-5-container"></div> <div id="aisle-6-container"></div>
            <div id="aisle-7-container"></div> <div id="aisle-8-container"></div>
            <div id="aisle-9-container"></div> <div id="aisle-10-container"></div>
            <div id="aisle-11-container"></div> <div id="aisle-12-container"></div>

            <div id="deposito-abajo-container" class="col-span-2 mt-4">
                <div id="deposito-abajo-node" class="aisle-node cursor-pointer" onclick="navigateToDepot('abajo')">
                    <div class="flex flex-col">
                        <span class="text-2xl mb-1"></span>
                        <h3 class="font-bold text-white uppercase text-sm">Dep贸sito Abajo</h3>
                    </div>
                </div>
            </div>
            <div id="deposito-arriba-container" class="col-span-2 mt-4">
                <div id="deposito-arriba-node" class="aisle-node cursor-pointer" onclick="navigateToDepot('arriba')">
                    <div class="flex flex-col">
                        <span class="text-2xl mb-1"></span>
                        <h3 class="font-bold text-white uppercase text-sm">Dep贸sito Arriba</h3>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // --- LISTA DE COMPAEROS ---
        const companions = [
            "LEYLA LIZETH AGUILAR MORENO",
    "YOHANNA BETZABE ALMAO BARRERA",
    "JOSE DANIEL ALVARADO DURAN",
    "NERWIN ANTONIO ALVARADO",
    "ROSA ELENA ALVARADO RODRIGUEZ",
    "MEURYS DEL ROSARIO ALVAREZ CRESPO",
    "JUANA ELISA ALVAREZ DE MORILLO",
    "JOSE MOISES ANGULO GALLARDO",
    "JONNAYKER ENRIQUE APONCIO SUAREZ",
    "JORGELYS ANNERYS APONCIO SUAREZ",
    "YEFERSON DANIEL ARANGURE TORREALBA",
    "FELIX DANIEL ARAQUE PEREZ",
    "OMAR ALBERTO ARAUJO RIVERO",
    "DASCHA MARYEILY BARRETO LOPEZ",
    "ESTREILI KATIUSKA BARRETO LOPEZ",
    "LUIS CARLOS BETANCOURT ANTIQUE",
    "GRICENY CAROLINA BORJAS LOYO",
    "YOLBER RAMON BRAVO ANGULO",
    "EDUARDO LUIS CAMACARO ALVAREZ",
    "MARIAXIS CAMERO CAMACHO",
    "SANTIAGO JOSE CAMERO CAMACHO",
    "JAVIER DE JESUS CAMERO NELO",
    "JOSE GREGORIO CAMERO NELO",
    "YORDANO RAFAEL CAMERO NELO",
    "OMAIRA DEL CARMEN CARRILLO",
    "ANTONY ERIBERTH CASTILLO VASQUEZ",
    "RICHARD DANIEL CHARACO LINARES",
    "DANIELA ALEJANDRA COLMENARES PALACIOS",
    "SABINA DEL CARMEN COLMENAREZ LUCENA",
    "JOSE MANUEL COLMENAREZ PEROZO",
    "MINERVA PASTORA CORDERO ALVAREZ",
    "JHONNY ANTONIO CORDERO",
    "GREYMARI CORDERO PIANGO",
    "JOSE RAFAEL CORDOVA",
    "MARIA DANIELA DAZA ARIAS",
    "DIAGNERY STHELA DE LEON LOPEZ",
    "WILIMAR JOSE DELGADO COLMENAREZ",
    "MANUEL ANTONIO DELGADO ELIAS",
    "LIZETH KARINA DELGADO ROMERO",
    "KELUHY ELIASIB DIAZ SUAREZ",
    "ADELYS ALEXANDER DOMINGUEZ TORRELBA",
    "CARLOS ALEJANDRO DURAN COLMENAREZ",
    "CARMEN LIJIA DURAN DE PARADA",
    "ROSA ALVIRA DURAN PEREZ",
    "GLENDA CAROLINA ESCALONA",
    "ANA PASTORA ESCALONA PERERA",
    "JESUS ANTONIO ESCOBAR BRACHO",
    "YOLEIDA PASTORA ESCOBAR",
    "FRANYE FERNANDEZ FERNANDEZ",
    "CRISTIAN EDUARDO GAMBOA SANCHEZ",
    "LUIS ALFONSO GARCIA GONZALEZ",
    "JHONNIER JOSE GARCIA MENDOZA",
    "SAMUEL JOSE GARCIA RODRIGUEZ",
    "MARIBEL DEL CARMEN GARFIDO PEREZ",
    "WILMER ALEJANDRO GIL RODRIGUEZ",
    "PABLO DAVID GOLLO MEDINA",
    "ANGIE PAOLA GOMEZ VALE",
    "YASGREINY GABRIELA GONZALEZ RODRIGUEZ",
    "SONIA BEATRIZ GOYO",
    "JACKELINE DEL CARMEN GUEDEZ RODRIGUEZ",
    "JENIN COROMOTO GUERE PEROZO",
    "DANNY JOSE GUTIERREZ ANGULO",
    "JOSE GREGORIO HERNANDEZ GOYO",
    "LEODANNY JOSE HERNANDEZ HERNANDEZ",
    "GAUDY DEL CARMEN HERNANDEZ RODRIGUEZ",
    "ERISBEL YOHANA IZARRA VIANA",
    "CESAR DANIEL JIMENEZ LUCENA",
    "RONNY ALBERTO JIMENEZ MEDINA",
    "ANGELICA DEL CARMEN LANDAETA LOYO",
    "OLDIANA LINAREZ GONZALEZ",
    "SUYIN NAYIBETH LINAREZ TONCEL",
    "ROSY CAROLINA LOPEZ VALERO",
    "ELIECER JOSUE MARCHAN MARCHAN",
    "ELIZAUL ELIAS MARCHAN MARCHAN",
    "HEILYN FABIOLA MARCHAN OVIEDO",
    "MARIANO EDUARD MARCHAN SIRA",
    "LUIS DANIEL MARTINES TORRELLAS",
    "JOSUE ENMANUEL MEDINA LEAL",
    "NIXON GREGORIO MEDINA",
    "EDUARDO ENRIQUE MEDIOMUNDO",
    "YOTXER DAVID MELENDEZ PIA",
    "NAYGEL COROMOTO MENDEZ GIL",
    "ANDREA VALENTINA MENDOZA PEREZ",
    "ELIAS RAFAEL MENDOZA PEREZ",
    "DANIERTH ANTONIO MENDOZA SANCHEZ",
    "KEIBER ANTONIO MERCADO GIMENEZ",
    "YONATHAN MERCADO GIMENEZ",
    "PUBLIO RAMN MOGOLLN CASTRO",
    "VICTOR MANUEL MONTILLA ANGULO",
    "DOUGLAS ALEJANDRO MONTILLA ESPINOZA",
    "BRAYAN ADOLFO MORALES APOSTOL",
    "ESLY ANTONIO MORENO",
    "JOSE MIGUEL MORILLO OLARTE",
    "DIEGO JOSE NAVAS MARAPATE",
    "EMILIO ANTONIO NELO",
    "CESAR ANTONIO NELO LOPEZ",
    "BRANDO ALEXANDER PADRON RODRIGUEZ",
    "MILAGRO DEL CARMEN PALACIOS PEREZ",
    "RIGOBERTO PARADAS ROJAS",
    "JOSE ARMANDO PERAZA VARGAS",
    "ADRIANNY PEREIRA RODRIGUEZ",
    "ALEXIS JOS PEREZ ALMAO",
    "DANIEL ALEJANDRO PEREZ GRATEROL",
    "MAIKEL JAVIER PEREZ GRATEROL",
    "ANLIYER ESTEBALIS PEREZ MARTINEZ",
    "DIANA CAROLINA PETAQUERO RODRIGUEZ",
    "LINDA COROMOTO PINEDA SOTO",
    "EMILY RAICELYS PIA FUENTES",
    "JOSE MOISES QUERALES COLMENAREZ",
    "JANETH DEL CARMEN QUIJADA URDANETA",
    "GERSON ELIEZER RAMOS SALERO",
    "JOSUE ELIUD RAMOS SALERO",
    "EYKARIS MILANYERITH RIOS PALACIOS",
    "MOISES JOSE RODRIGUEZ RODRIGUEZ",
    "NERLIMAR COROMOTO RODRIGUEZ ALVARADO",
    "NERCY PASTORA RODRIGUEZ ALVARADO",
    "DILEXI JOSE RODRIGUEZ ALVAREZ",
    "DINEXIS JOSEFINA RODRIGUEZ ALVAREZ",
    "HENRY RAMON RODRIGUEZ CAMACARO",
    "ALEXANDER OLIVER RODRIGUEZ GONZALEZ",
    "ISMAEL ANTONIO RODRIGUEZ SUAREZ",
    "MARIELIS ALEXELIS RODRIGUEZ LOPEZ",
    "ABISAI DAVID RODRIGUEZ MORENO",
    "JOSSEANNYS YOHANDRELIS RODRIGUEZ PIRE",
    "DARNYD TAHITI RODRIGUEZ RAMOS",
    "WILMER ANTONIO RODRIGUEZ ROJAS",
    "YOHANDER ANTONIO ROJAS RANGEL",
    "YOSBELYS LILIANA ROJAS RANGEL",
    "JIMMY SEGUNDO ROJAS VARGAS",
    "JIMMY JOSE (HIJO) ROJAS YEPEZ",
    "EVA PATRICIA ROMERO CAMACARO",
    "EVER JAVIER ROMERO URBINA",
    "RONALD EFRAIN ROMERO URBINA",
    "FRANCISCO JOSE SALAS CALDERA",
    "JUAN DOMINGO SANCHEZ PEA",
    "SOL EDUARDO SANCHEZ REYES",
    "JOSE ANGEL SANTANA ANGULO",
    "MONICA ELISENA SEQUERA VILLALOBOS",
    "WILDER ALEXANDER SILVA PERAZA",
    "LEYDA MACRINA SIRA SANCHEZ",
    "YERALDIN ANNERYS SUAREZ PERDOMO",
    "JORGE AURELIO SUAREZ PINEDA",
    "YETZABETH PATRICIA SUAREZ",
    "JENER SKEN TIMAURE GUEDEZ",
    "NORMARYS YANETH TIMAURE TORRES",
    "DOMINGO ANTONIO TORREALBA AZUAJE",
    "OMARLYS PASTORA TORREALBA SUAREZ",
    "ANDERSON JOSE TORRES MEDINA",
    "MARY LUZ TORRES DE CALLES",
    "LUIMAR VANESSA TORRES MELENDEZ",
    "FRANYIMAR PASTORA TOVAR VASQUEZ",
    "YENNY ORIANA VALDERRAMA ROJAS",
    "RAIMON JOSE VALERO GARCIA",
    "CARLOS ALCIDES VALLES MONTERO",
    "LIZETH CAROLINA VARGAS CAMBERO",
    "RAMON VARGAS CECILIO",
    "JOSE RAFAEL VASQUEZ GONZALEZ",
    "NAYIBE PASTORA VASQUEZ VARGAS",
    "MAGALY JOSEFINA VILLANUEVA",
    "FRANCISCO JAVIER VILORIA GOMEZ",
    "MIGUEL ANGEL ZAMBRANO MORENO",
    "EVELIN NATHALY MEDINA VALDERRAMA",
    "ARANXA DEL CARMEN ROJAS CAMERO",
    "EMELYN MOISELYN ANGULO GARCES",
    "ISNAILY DEL CARMEN CASTAEDA ORELLANA",
    "ROBERTH JOSE SAHAVEDRA VARGAS",
    "JOHAN JAVIER PUERTA MANZANO",
    "FERNANDO ANTONIO MUJICA URBINA",
    "GIANFRANCO SANTORO ANGULO",
    "ALEXANDER SOTO",
    "ROSELYN PASTORA PERAZA SANCHEZ",
    "ISAMAR BEATRIZ TORREZ COLMENAREZ",
    "JESUS DANIEL CAMACHO GUEDEZ",
    "GREIMAR DUSLEYVIS CASTRO LAGUNA",
    "CARMEN COROMOTO MEDINA DE PEREZ",
    "WILMER RAFAEL MARQUEZ YEPEZ",
    "KLEIBER ADRIAN CASTILLO PERALTA"
];

        // --- L贸gica del Buscador ---
        const searchInput = document.getElementById('search-input');
        const clearBtn = document.getElementById('clear-input-btn');
        const nameList = document.getElementById('name-list');
        const loginScreen = document.getElementById('login-screen');
        const welcomeMessage = document.getElementById('welcome-message');

        function filterNames(query) {
            // Mostrar bot贸n X si hay texto
            if (query.trim().length > 0) {
                clearBtn.classList.remove('hidden');
            } else {
                clearBtn.classList.add('hidden');
            }

            const filtered = companions.filter(name => name.toLowerCase().includes(query.toLowerCase()));
            renderNames(filtered);
        }

        function clearLoginInput() {
            searchInput.value = '';
            searchInput.focus();
            clearBtn.classList.add('hidden');
            renderNames(companions); // Mostrar todos al limpiar
        }

        function renderNames(list) {
            nameList.innerHTML = '';
            if (list.length === 0) {
                nameList.classList.add('hidden');
                return;
            }
            list.forEach(name => {
                const div = document.createElement('div');
                div.className = 'name-item';
                div.textContent = name;
                div.onclick = () => selectName(name);
                nameList.appendChild(div);
            });
            nameList.classList.remove('hidden');
        }

        function selectName(name) {
            searchInput.value = name;
            clearBtn.classList.remove('hidden'); // Mostrar X al seleccionar
            nameList.classList.add('hidden');
        }

        searchInput.addEventListener('input', (e) => filterNames(e.target.value));
        searchInput.addEventListener('focus', () => renderNames(companions));

        // Cerrar lista al hacer clic fuera
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.select-container')) nameList.classList.add('hidden');
        });

        function handleLogin(event) {
            event.preventDefault();
            // Convertimos a may煤sculas para mantener consistencia
            const name = searchInput.value.trim().toUpperCase(); 
            
            if (name === "") {
                alert("Por favor escriba un nombre.");
                return;
            }

            // L贸gica modificada: Si el nombre no existe, se agrega autom谩ticamente
            if (!companions.includes(name)) {
                companions.push(name);
                alert(`隆Bienvenido/a, ${name}! Te hemos agregado a la lista temporalmente.`);
            }

            // Proceder con el login
            setUserName(name);
            localStorage.setItem('cecosesolaUser', name);
        }

        function setUserName(name) {
            loginScreen.style.opacity = '0';
            setTimeout(() => loginScreen.classList.add('hidden'), 500);
            
            // Inyectamos el nombre junto con un bot贸n para SALIR / CAMBIAR usuario
            welcomeMessage.innerHTML = `
                <div class="flex items-center gap-3">
                    <span>COMPAERO: ${name}</span>
                    <button onclick="logout()" class="group bg-red-500/10 hover:bg-red-500 text-red-400 hover:text-white border border-red-500/30 rounded-full p-1 transition-all" title="Cambiar Usuario / Salir">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>
            `;
            welcomeMessage.classList.remove('hidden');
        }

        function logout() {
            // 1. Borrar usuario guardado
            localStorage.removeItem('cecosesolaUser');
            
            // 2. Ocultar mensaje de bienvenida
            welcomeMessage.classList.add('hidden');
            
            // 3. Limpiar el input y bot贸n X
            clearLoginInput();
            
            // 4. Mostrar pantalla de login nuevamente
            loginScreen.classList.remove('hidden');
            // Forzar reflujo para activar transici贸n si fuera necesaria, aunque aqu铆 basta con quitar hidden
            setTimeout(() => {
                loginScreen.style.opacity = '1';
            }, 50);
        }

        // --- L贸gica del Mapa ---
        const aisles = [
            { id: 1, name: 'PASILLO 1 PASTAS' }, { id: 2, name: 'PASILLO 2 CAFE' },
            { id: 3, name: 'PASILLO 3 PANES' }, { id: 4, name: 'PASILLO 4 GALLETAS' },
            { id: 5, name: 'PASILLO 5 SALSA' }, { id: 6, name: 'PASILLO 6 JABON' },
            { id: 7, name: 'PASILLO 7 PAPEL' }, { id: 8, name: 'PASILLO 8' },
            { id: 9, name: 'PASILLO GRANOS' }, { id: 10, name: 'CAVA CUARTO' },
            { id: 11, name: 'PASILLO ARRIBA 1-3' }, { id: 12, name: 'PASILLO ARRIBA 4-6' },
        ];

        function renderAisles() {
            aisles.forEach(aisle => {
                const container = document.getElementById(`aisle-${aisle.id}-container`);
                if (container) {
                    container.innerHTML = `
                        <div id="aisle-${aisle.id}-node" class="aisle-node cursor-pointer" onclick="navigateToAisle(${aisle.id})">
                            <div class="flex flex-col items-center">
                                <span class="text-xl font-black gradient-text mb-1">${aisle.id}</span>
                                <h3 class="text-[10px] md:text-xs font-bold text-white uppercase tracking-tighter">${aisle.name}</h3>
                            </div>
                        </div>
                    `;
                }
            });
        }

        function getCenter(id) {
            const element = document.getElementById(id);
            if (!element) return null;
            const mapContainer = document.getElementById('map-view');
            const mapRect = mapContainer.getBoundingClientRect();
            const rect = element.getBoundingClientRect();
            return {
                x: ((rect.left + rect.width / 2 - mapRect.left) / mapRect.width) * 1000,
                y: ((rect.top + rect.height / 2 - mapRect.top) / mapRect.height) * 1000
            };
        }

        function drawConnections() {
            const central = getCenter('central-node');
            if (!central) return;
            let paths = '';
            for (let i = 1; i <= 12; i++) {
                const node = getCenter(`aisle-${i}-node`);
                if (node) {
                    paths += `<path class="flow-line" d="M ${central.x} ${central.y} L ${node.x} ${node.y}"/>`;
                }
            }
            document.getElementById('connection-lines').innerHTML = paths;
        }

        function navigateToAisle(id) { window.location.href = `pasillo-${id}.html`; }
        function navigateToDepot(type) { window.location.href = `deposito-${type}.html`; }

        window.onload = () => {
            renderAisles();
            setTimeout(drawConnections, 100);
            const saved = localStorage.getItem('cecosesolaUser');
            if (saved) setUserName(saved);
        };
        window.onresize = drawConnections;
    </script>
</body>
</html>